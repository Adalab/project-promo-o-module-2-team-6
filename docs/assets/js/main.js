"use strict";const allInput=document.querySelectorAll(".js-input"),namePreview=document.querySelector(".js-preview-name"),jobPreview=document.querySelector(".js-preview-job"),emailPreview=document.querySelector(".js-preview-email"),phonePreview=document.querySelector(".js-preview-phone"),linkedinPreview=document.querySelector(".js-preview-linkedin"),githubPreview=document.querySelector(".js-preview-github"),data={name:"",job:"",email:"",phone:"",linkedin:"",github:"",photo:"",palette:1};function handlerClickCollapsable(e){const r=document.querySelector(".form__design"),t=document.querySelector(".form__fill"),o=document.querySelector(".form__share");r.classList.add("collapsed"),t.classList.add("collapsed"),o.classList.add("collapsed");const l=document.querySelectorAll(".form__title--chevron");for(const e of l)e.classList.add("fa-chevron-down"),e.classList.remove("fa-chevron-up");const a=e.currentTarget.querySelector(".form__title--chevron");a.classList.add("fa-chevron-up"),a.classList.remove("fa-chevron-down"),e.currentTarget.parentNode.classList.toggle("collapsed")}const collapsableDesign=document.querySelector(".js-design__title");collapsableDesign.addEventListener("click",handlerClickCollapsable);const collapsableFill=document.querySelector(".js-fill__title");collapsableFill.addEventListener("click",handlerClickCollapsable);const collapsableShare=document.querySelector(".js-share__title");function handleWriteInput(e){const r=e.target.name,t=e.target.value;"name"===r?data.name=t:"job"===r?data.job=t:"email"===r?data.email=t:"phone"===r?data.phone=t:"linkedin"===r?data.linkedin=t:"github"===r&&(data.github=t),renderPreview()}function renderPreview(){""===data.name?namePreview.innerHTML="Nombre Apellido":namePreview.innerHTML=data.name,""===data.job?jobPreview.innerHTML="Front-End developer":jobPreview.innerHTML=data.job,""===data.email?emailPreview.href="":emailPreview.href="mailto:"+data.email,""===data.linkedin?linkedinPreview.href="":linkedinPreview.href="https://www.linkedin.com/in/"+data.linkedin,""===data.github?githubPreview.href="":githubPreview.href="https://github.com/"+data.github,""===data.phone?phonePreview.href="":phonePreview.href="tel:"+data.phone}collapsableShare.addEventListener("click",handlerClickCollapsable);for(const e of allInput)e.addEventListener("keyup",handleWriteInput);const inputColors=document.querySelectorAll(".js-palette");function handleColorChange(){const e=document.querySelectorAll(".js-radio"),r=document.querySelectorAll(".js-icons"),t=document.querySelectorAll(".js-border"),o=document.querySelector(".js-borderleft");for(const l of e)if("1"===l.value&&l.checked){namePreview.classList.add("colorgreen"),namePreview.classList.remove("colorred"),namePreview.classList.remove("coloryellow");for(const e of r)e.classList.add("colourgreen"),e.classList.remove("colourred"),e.classList.remove("colouryellow");for(const e of t)e.classList.add("bordergreen"),e.classList.remove("borderred"),e.classList.remove("borderyellow");o.classList.add("leftgreen"),o.classList.remove("leftred"),o.classList.remove("leftyellow")}else if("2"===l.value&&l.checked){namePreview.classList.remove("colorgreen"),namePreview.classList.add("colorred"),namePreview.classList.remove("coloryellow");for(const e of r)e.classList.remove("colourgreen"),e.classList.add("colourred"),e.classList.remove("colouryellow");for(const e of t)e.classList.remove("bordergreen"),e.classList.add("borderred"),e.classList.remove("borderyellow");o.classList.remove("leftgreen"),o.classList.add("leftred"),o.classList.remove("leftyellow")}else if("3"===l.value&&l.checked){namePreview.classList.remove("colorgreen"),namePreview.classList.remove("colorred"),namePreview.classList.add("coloryellow");for(const e of r)e.classList.remove("colourgreen"),e.classList.remove("colourred"),e.classList.add("colouryellow");for(const e of t)e.classList.remove("bordergreen"),e.classList.remove("borderred"),e.classList.add("borderyellow");o.classList.remove("leftgreen"),o.classList.remove("leftred"),o.classList.add("leftyellow")}}for(const e of inputColors)e.addEventListener("click",handleColorChange);const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const r=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(r)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result}fileField.addEventListener("change",getImage);const createButton=document.querySelector(".js-submit"),createLink=document.querySelector(".js-link-card"),createButtonTw=document.querySelector(".js-twitter");function handleChangeInputs(){let e=!0;for(const r of allInput)r.required&&""===r.value&&e&&(e=!1);createButton.disabled=!e}for(const e of allInput)e.addEventListener("change",handleChangeInputs);function handleCreateCard(e){e.preventDefault(),fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",body:JSON.stringify(data),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{console.log(e),createLink.href=e.cardURL,createLink.innerHTML=e.cardURL,console.log(e.cardURL),createButtonTw.innerHTML=`<a href="https://twitter.com/intent/tweet?text=¡Hola!%20Mira%20mi%20tarjeta%20de%20presentación%20de%20Awesome%20Cards%20&url=${e.cardURL}" target="_blank" title="twitter">Compartir en twitter</a>`})}createButton.addEventListener("click",handleCreateCard);const resetButton=document.querySelector(".js-reset");function handleResetCard(){document.querySelector(".js-form").reset(),data.name="",data.job="",data.email="",data.phone="",data.linkedin="",data.github="",data.photo="",data.palette=1,renderPreview(),handleColorChange(),profileImage.style.backgroundImage="",profilePreview.style.backgroundImage=""}resetButton.addEventListener("click",handleResetCard);