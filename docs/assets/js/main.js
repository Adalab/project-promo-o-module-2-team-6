"use strict";const allInput=document.querySelectorAll(".js-input"),allRadio=document.querySelectorAll(".js-radio"),namePreview=document.querySelector(".js-preview-name"),jobPreview=document.querySelector(".js-preview-job"),emailPreview=document.querySelector(".js-preview-email"),phonePreview=document.querySelector(".js-preview-phone"),linkedinPreview=document.querySelector(".js-preview-linkedin"),githubPreview=document.querySelector(".js-preview-github"),data={name:"",job:"",email:"",phone:"",linkedin:"",github:"",photo:"",palette:1};function handlerClickCollapsable(e){const t=document.querySelector(".form__design"),r=document.querySelector(".form__fill"),a=document.querySelector(".form__share");t.classList.add("collapsed"),r.classList.add("collapsed"),a.classList.add("collapsed");const o=document.querySelectorAll(".form__title--chevron");for(const e of o)e.classList.add("fa-chevron-down"),e.classList.remove("fa-chevron-up");const l=e.currentTarget.querySelector(".form__title--chevron");l.classList.add("fa-chevron-up"),l.classList.remove("fa-chevron-down"),e.currentTarget.parentNode.classList.toggle("collapsed")}const collapsableDesign=document.querySelector(".js-design__title");collapsableDesign.addEventListener("click",handlerClickCollapsable);const collapsableFill=document.querySelector(".js-fill__title");collapsableFill.addEventListener("click",handlerClickCollapsable);const collapsableShare=document.querySelector(".js-share__title");function handleWriteInput(e){const t=e.target.name,r=e.target.value;"name"===t?data.name=r:"job"===t?data.job=r:"email"===t?data.email=r:"phone"===t?data.phone=r:"linkedin"===t?data.linkedin=r:"github"===t&&(data.github=r),renderPreview()}function handleWriteRadio(e){e.target.name;const t=e.target.value;data.palette=parseInt(t)}function renderPreview(){""===data.name?namePreview.innerHTML="Nombre Apellido":namePreview.innerHTML=data.name,""===data.job?jobPreview.innerHTML="Front-End developer":jobPreview.innerHTML=data.job,""===data.email?emailPreview.href="":emailPreview.href="mailto:"+data.email,""===data.linkedin?linkedinPreview.href="":linkedinPreview.href="https://www.linkedin.com/in/"+data.linkedin,""===data.github?githubPreview.href="":githubPreview.href="https://github.com/"+data.github,""===data.phone?phonePreview.href="":phonePreview.href="tel:"+data.phone}collapsableShare.addEventListener("click",handlerClickCollapsable);for(const e of allInput)e.addEventListener("keyup",handleWriteInput);for(const e of allRadio)e.addEventListener("click",handleWriteRadio);const inputColors=document.querySelectorAll(".js-palette");function handleColorChange(){const e=document.querySelectorAll(".js-radio"),t=document.querySelectorAll(".js-icons"),r=document.querySelectorAll(".js-border"),a=document.querySelector(".js-borderleft");for(const o of e)if("1"===o.value&&o.checked){namePreview.classList.add("colorgreen"),namePreview.classList.remove("colorred"),namePreview.classList.remove("coloryellow");for(const e of t)e.classList.add("colourgreen"),e.classList.remove("colourred"),e.classList.remove("colouryellow");for(const e of r)e.classList.add("bordergreen"),e.classList.remove("borderred"),e.classList.remove("borderyellow");a.classList.add("leftgreen"),a.classList.remove("leftred"),a.classList.remove("leftyellow")}else if("2"===o.value&&o.checked){namePreview.classList.remove("colorgreen"),namePreview.classList.add("colorred"),namePreview.classList.remove("coloryellow");for(const e of t)e.classList.remove("colourgreen"),e.classList.add("colourred"),e.classList.remove("colouryellow");for(const e of r)e.classList.remove("bordergreen"),e.classList.add("borderred"),e.classList.remove("borderyellow");a.classList.remove("leftgreen"),a.classList.add("leftred"),a.classList.remove("leftyellow")}else if("3"===o.value&&o.checked){namePreview.classList.remove("colorgreen"),namePreview.classList.remove("colorred"),namePreview.classList.add("coloryellow");for(const e of t)e.classList.remove("colourgreen"),e.classList.remove("colourred"),e.classList.add("colouryellow");for(const e of r)e.classList.remove("bordergreen"),e.classList.remove("borderred"),e.classList.add("borderyellow");a.classList.remove("leftgreen"),a.classList.remove("leftred"),a.classList.add("leftyellow")}}for(const e of inputColors)e.addEventListener("click",handleColorChange);const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result}fileField.addEventListener("change",getImage);const createButton=document.querySelector(".js-submit"),createLink=document.querySelector(".js-link-card"),createButtonTw=document.querySelector(".js-twitter");function handleChangeInputs(){let e=!0;for(const t of allInput)t.required&&""===t.value&&e&&(e=!1);createButton.disabled=!e}for(const e of allInput)e.addEventListener("change",handleChangeInputs);function handleCreateCard(e){e.preventDefault(),fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",body:JSON.stringify(data),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{createLink.innerHTML=`<h3 class="form__card--title">La tarjeta ha sido creada:</h3> <a class="form__card--link" href="${e.cardURL}"target="_blank" title="URL card">${e.cardURL}</a>`,createButtonTw.innerHTML=`<a class="form__twitter--link" href="https://twitter.com/intent/tweet?text=¡Hola!%20Mira%20mi%20tarjeta%20de%20presentación%20de%20Awesome%20Cards%20&url=${e.cardURL}" target="_blank" title="twitter"><i class="form__twitter--icon fab fa-twitter"></i>Compartir en twitter</a>`})}createButton.addEventListener("click",handleCreateCard);const resetButton=document.querySelector(".js-reset");function handleResetCard(){document.querySelector(".js-form").reset(),data.name="",data.job="",data.email="",data.phone="",data.linkedin="",data.github="",data.photo="",data.palette=1,renderPreview(),handleColorChange(),profileImage.style.backgroundImage="",profilePreview.style.backgroundImage=""}resetButton.addEventListener("click",handleResetCard);